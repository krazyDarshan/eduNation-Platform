{% extends "base.html" %}

{% block title %}Quiz - {{ quiz.title }} - {{ course.title }} - eduNation{% endblock %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col-lg-8">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{{ url_for('main.index') }}">Home</a></li>
                    <li class="breadcrumb-item"><a href="{{ url_for('courses.index') }}">Courses</a></li>
                    <li class="breadcrumb-item"><a href="{{ url_for('courses.detail', course_id=course.id) }}">{{ course.title }}</a></li>
                    <li class="breadcrumb-item active">Quiz: {{ quiz.title }}</li>
                </ol>
            </nav>
            
            <div class="card">
                <div class="card-header">
                    <h2 class="mb-0 text-info"><i class="fas fa-question-circle me-2"></i>{{ quiz.title }}</h2>
                </div>
                <div class="card-body">
                    {% if quiz.description %}
                    <p class="text-muted">{{ quiz.description }}</p>
                    {% endif %}

                    {% if questions %}
                    <form method="POST" action="{{ url_for('courses.submit_quiz', course_id=course.id, quiz_id=quiz.id) }}">
                        <ol class="list-group list-group-flush list-group-numbered">
                            {% for question in questions %}
                            <li class="list-group-item">
                                <div class="mb-2"><strong>{{ question.text }}</strong></div>
                                <div class="ms-3">
                                    {% for ans in question.answers_list %}
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="q{{ question.id }}" id="a{{ ans.id }}" value="{{ ans.id }}">
                                        <label class="form-check-label" for="a{{ ans.id }}">{{ ans.text }}</label>
                                    </div>
                                    {% endfor %}
                                </div>
                            </li>
                            {% endfor %}
                        </ol>
                        <div class="mt-3 d-flex justify-content-between">
                            <a href="{{ url_for('courses.detail', course_id=course.id) }}" class="btn btn-outline-secondary">
                                <i class="fas fa-chevron-left me-1"></i> Back to Course
                            </a>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-paper-plane me-1"></i> Submit Answers
                            </button>
                        </div>
                    </form>
                    {% else %}
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle me-2"></i>No questions available for this quiz yet.
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-info-circle me-2"></i>Quiz Info</h5>
                </div>
                <div class="card-body">
                    <ul class="list-unstyled mb-0">
                        <li class="mb-2"><strong>Course:</strong> {{ course.title }}</li>
                        <li class="mb-2"><strong>Questions:</strong> {{ questions|length }}</li>
                        <li class="mb-2"><strong>Difficulty:</strong> {{ course.difficulty.title() }}</li>
                        <li class="mb-0 text-muted">Your answers are not stored in this demo view.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
